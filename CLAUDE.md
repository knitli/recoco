# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/claude-code) when working with code in this repository.

## Build and Test Commands

This project is a pure Rust workspace.

### Building

```bash
cargo build              # Build all crates
cargo build --release    # Build for release
```

### Testing

```bash
cargo test               # Run all tests
cargo clippy             # Run linter
cargo fmt                # Check formatting
```

### Changelog

This project uses [git-cliff](https://github.com/orhun/git-cliff) for changelog generation.
Commits must follow the [Conventional Commits](https://www.conventionalcommits.org/) specification.

```bash
git cliff -o CHANGELOG.md  # Generate/Update changelog
```

## Code Structure

```
cocoindex/
├── crates/
│   ├── recoco/             # Main crate - Core ETL engine & logic
│   ├── recoco_utils/       # Shared utility functions and helpers
│   └── recoco_extra_text/  # Text processing extensions
├── CHANGELOG.md            # Generated by git-cliff
├── cliff.toml              # git-cliff configuration
└── Cargo.toml              # Workspace configuration
```

## Key Concepts

- **Recoco**: A modular, high-performance ETL and data transformation library written in Rust.
- **Granular Features**: Heavy dependencies (Postgres, S3, etc.) are feature-gated to allow users to pick only what they need.
- **Incremental Processing**: The framework maintains derived data from source data incrementally.
- **Flows & Operations**: Data pipelines defined as flows containing various operations (sources, transforms, targets).
